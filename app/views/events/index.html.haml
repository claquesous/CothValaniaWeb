%h1.valigned= @config.events.pluralize
- if @update_visible
  = form_tag update_visible_events_path, method: :put
.pull-right
  - if leader?
    - if @update_visible
      = submit_tag 'Update Visible', class: "btn btn-primary"
      = link_to 'Cancel', events_path, class: "btn btn-danger"
    - else
      = link_to 'Update Visible', events_path(update_visible: 1), class: "btn btn-info"
      = link_to "New #{@config.events.singularize}", new_event_path, class: "btn btn-success"

%table.table.table-condensed
  %tr
    - if @update_visible
      %th
    %th Name
    %th Points
    %th Failure Points
    %th Remarks
    %th Time
    - if leader?
      %th
      %th

  - @events.each do |event|
    %tr
      - if @update_visible
        %td= check_box_tag "event_ids[]", event.id, !event.hidden, id: "visible_ids_#{event.id}"
      %td= link_to event.name, event
      %td= event.points
      %td= event.failure_points
      %td= event.remarks
      %td= event.time
      - if leader?
        %td= link_to 'Edit', edit_event_path(event), class: "btn btn-info"
        %td= link_to 'Destroy', event, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger"

%br

